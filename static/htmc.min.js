((t=/\$([a-zA-Z][a-zA-Z0-9_]*)/g,n=t=>`((el,__i=0)=>{\n${t}\n})`,r=n=>n.replace(t,"$1.v"))=>{elr=(el,l=0)=>{let a=`/*${el.tagName}*/`;if("svg"==el.tagName)a="(_=>0)";else if("SCRIPT"==el.tagName&&el.getAttribute("type")&&"text/htmc"==el.getAttribute("type"))a+=`${r(el.innerText)};__i++`;else if("TEMPLATE"==el.tagName&&el.getAttribute`for`){let l=el.getAttribute`for`,s=[...l.matchAll(t)],i=s.length>0;a+=n(`let ctr=document.createElement('${el.getAttribute("tag")||"div"}');ctr.loaded=1;el.after(ctr);\nfor(let attr of el.attributes)ctr.setAttribute(attr.name,attr.value);\n${i?"el.L=cmp(_=>{":"{"}dispose(ctr);ctr.innerHTML='';\nfor(${r(l)}){\n\tlet cl=el.content.cloneNode(1);\n\tlet start = ctr.children.length;\n\tctr.appendChild(cl);\n\teval(elr(ctr,start))(ctr,start);\n}${i?`},[${s.map(t=>t[1]).join`,`}]);`:"}"}`)}else{let s="";for(let n of el.attributes)if(n.name.startsWith`run`){let l=[...n.value.matchAll(t)],a=l.length;s+=`${a?"el.L=cmp(_=>{":"{"}\n${r(n.value)}\n${a?`},[${l.map(t=>t[1]).join`,`}]);`:"}"}\n`}else n.name.startsWith("on-")&&(s+=`el.addEventListener('${n.name.slice(3)}',e=>{${r(n.value)}});`);for(;l<el.children.length;l++){let t=el.children[l],n=elr(t);t.loaded||"SCRIPT"==t.tagName||(n=`\n${n}(el${null!=l?".children[__i++]":""});`),"TEMPLATE"==t.tagName&&(n+="__i++"),s+=n}a+=n(s)}return a}})();class t extends EventTarget{#t;constructor(t){super(),this.#t=t}get v(){return this.#t}set v(t){this.#t!==t&&(this.#t=t,this.up())}up(){this.dispatchEvent(new CustomEvent("change"))}sub(t){return t(),this.addEventListener("change",t),n=>this.rmoveEventListener("change",t)}}class n extends t{constructor(n,r){super(n(...r)),this.ab=new AbortController;for(let l of new Set([...r]))l instanceof t&&l.addEventListener("change",t=>this.v=n(...r),{signal:this.ab.signal})}}dispose=el=>{el.L&&el.L.ab.abort();for(let t of el.children)dispose(t)},sig=n=>new t(n),cmp=(t,r)=>new n(t,r);let htmc=(el,props={})=>{"string"==typeof el&&(el=document.getElementById(el)),eval(elr(el))(el)};